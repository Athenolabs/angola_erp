// Copyright (c) 2016, HELKyds lda. and contributors
// For license information, please see license.txt

var irt=0;
var inss=0;
var salario = 0;


frappe.ui.form.on('Salary Structure', {
	refresh: function(frm) {
			//Get Salario
		var tbl1 = frm.doc.earnings || [];
		var tbl2 = frm.doc.deductions || [];

//		inss_valor =cur_frm.call({method:"angola_erp.angola_erpnext.validations.irt.get_inss",args:{"start":0}})	
//		for(var i = 0; i < tbl1.length; i++){
//			if (tbl1[i].salary_component == "Salario Base" || tbl1[i].salary_component == "Basic" && tbl1[i].amount != 0){
//				salario = tbl1[i].amount
//				irt_valor =cur_frm.call({method:"angola_erp.angola_erpnext.validations.irt.get_irt",args:{"start":salario}})
//			}
//		}	


	},
	
	onload: function(frm){
		frm.set_query("salary_component", "earnings", function(doc, cdt, cdn) {
			return {
				"filters": {
					"abono": 1,
				}
			};
		});
		frm.set_query("salary_component", "deductions", function(doc, cdt, cdn) {
			return {
				"filters": {
					"desconto": 1,
				}
			};
		});
		calculate_totals(frm.doc);
	},
});


